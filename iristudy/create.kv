#:kivy 2.1.0
#:import utils kivy.utils
#:import Factory kivy.factory.Factory

<MySpinnerOption@SpinnerOption>:
    background_color: utils.get_color_from_hex('#BF98D1')
    background_down: ''



<CreateFormScreen>
    groupName: groupName
    subject: subject
    description: description
    
    FloatLayout:
        size: root.width, root.height
        canvas.before: 
            Color: 
                rgb: utils.get_color_from_hex('#F1E6F8')
            Rectangle:
                pos: self.pos
                size: self.size
        
        #top header to go back to homepage
        Label:
            size_hint: (1, .06)
            pos_hint: {"right": 1, "top":1}
            canvas.before:
                Color:
                    rgb: utils.get_color_from_hex('#BF98D1')
                Rectangle: 
                    pos: self.pos
                    size: self.size
        Button: 
            size_hint:(.55, .05)
            pos_hint: {"center_x":.5, "top":1}
            background_normal: ""
            background_color: utils.get_color_from_hex('#BF98D1')
            on_press: self.background_color = (1.2, 1.2, 1, 0)
            on_release: self.background_color = utils.get_color_from_hex('#BF98D1')
            on_press: app.root.current = 'home'
            canvas:
                Rectangle:
                    source: "assets/images/logoontop.png"
                    size: self.size
                    pos: self.pos
        
        Label:
            size_hint: (1, 0.18)
            pos_hint: {"x":0, "top":0.98}
            font_name: 'assets/fonts/static/Fredoka/Fredoka-regular'
            font_size: 28
            bold: True
            text: "CREATE A GROUP"
            color: (0, 0, 0)


        # buttons 
        Label:
            size_hint: (0.1, 0.15)
            pos_hint: {"x": 0.13, "top": 0.90}
            font_name: 'assets/fonts/static/Fredoka/Fredoka-regular'
            text: "Group Name: "
            color: (0, 0, 0)
        TextInput:
            size_hint: (0.94, 0.05)
            pos_hint: {"center_x": 0.5, "y":0.75}
            font_name: 'assets/fonts/static/Fredoka/Fredoka-regular'
            hint_text: "Group name"
            id: groupName
            multiline: False
            cursor_color: utils.get_color_from_hex('#7F31A3')

        Label:
            size_hint: (0.1, 0.15)
            pos_hint: {"x": 0.07, "y": 0.64}
            font_name: 'assets/fonts/static/Fredoka/Fredoka-regular'
            text: "Subject: "
            color: (0, 0, 0)
            # give id = subject
        Spinner:
            size_hint: (0.8, 0.06)
            pos_hint: {"center_x": 0.5, "y": 0.63}
            font_name: 'assets/fonts/static/Fredoka/Fredoka-regular'

            bold: True
            color: (0, 0, 0)
            background_normal: ""
            background_color: utils.get_color_from_hex('#BF98D1')
            on_press: self.background_color = (1.2, 1.2, 1, 0)
            on_release: self.background_color = utils.get_color_from_hex('#BF98D1')
            
            id: subject
            text: "Select subject"
            values: ["Math", "English", "Biology", "Chemistry", "History"]
            
            option_cls: Factory.get("MySpinnerOption")
            on_text: root.spinner_clicked(subject.text)

        Label:
            size_hint: (0.8, 0.06)
            pos_hint: {"x": -0.22, "y": 0.56}
            font_name: 'assets/fonts/static/Fredoka/Fredoka-regular'
            text: "Meeting time: "
            color: (0, 0, 0)
        Button:
            size_hint: (0.8, 0.06)
            pos_hint: {"center_x": 0.5, "y": 0.50}
            color: (0, 0, 0)
            background_normal: ""
            background_color: utils.get_color_from_hex('#BF98D1')
            font_name: 'assets/fonts/static/Fredoka/Fredoka-regular'
            text: "Choose a time"
            on_release: root.popUp()
            
        Label:
            size_hint: (0.1, 0.15)
            pos_hint: {"x": 0.12, "top": 0.55}
            font_name: 'assets/fonts/static/Fredoka/Fredoka-regular'
            text: "Description: "
            color: (0, 0, 0)
        TextInput:
            size_hint: (0.93, 0.24)
            pos_hint: {"center_x": 0.5, "y": 0.20}
            font_name: 'assets/fonts/static/Fredoka/Fredoka-regular'
            hint_text: "Description"
            id: description
            multiline: True
            cursor_color: utils.get_color_from_hex('#7F31A3')


        Button:
            size_hint: (0.4, 0.1)
            pos_hint: {"center_x": 0.5, "y": 0.06}
            font_name: 'assets/fonts/static/Fredoka/Fredoka-regular'
            bold: True
            color: (0, 0, 0)
            font_size: 25
            text: "SUBMIT"
            background_normal: ""
            background_color: utils.get_color_from_hex('#BF98D1')
            on_press: self.background_color = (1.2, 1.2, 1, 0)
            on_release: self.background_color = utils.get_color_from_hex('#BF98D1')
            on_press: root.submit()

                # assign a group id randomly if the submission is valid

